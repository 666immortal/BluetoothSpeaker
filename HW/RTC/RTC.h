/*********************************************************************************************************
* 模块名称: RTC.h
* 摘    要: RTC驱动
* 当前版本: 1.0.0
* 作    者: 
* 完成日期: 2018年03月01日
* 内    容:
* 注    意: none                                                                  
**********************************************************************************************************
* 取代版本: 
* 作    者:
* 完成日期: 
* 修改内容:
* 修改文件: 
*********************************************************************************************************/
#ifndef _RTC_H_
#define _RTC_H_	 

/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/
#include "stm32f10x_it.h"
#include "DataType.h"

/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/
#define  USER_DEFINE_RTC_CLK   RCC_RTCCLKSource_LSE  //用户定义RTC的时钟源

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/
typedef struct 
{	
  //公历时分秒日月年周
  __IO u8  hour;
	__IO u8  min;
	__IO u8  sec;		
	__IO u16 year;
	__IO u8  month;
	__IO u8  date;
	__IO u8  week;		
}StructCalendar;	

extern StructCalendar calendar;	//日历结构体
extern u8 AlarmFlag;
extern u32 AlarmSecCge;

/*********************************************************************************************************
*                                              API函数声明
*********************************************************************************************************/
u8 InitRTC(void);                                                     //初始化RTC,返回0,失败;1,成功;

u8 JudgeLeapYear(u16 year);                                           //判断是否为闰年
u8 GetRTC(void);                                                      //更新时间   
u8 SetRTC(u16 syear, u8 smon, u8 sday, u8 hour, u8 min, u8 sec);      //设置时间			 
u8 GetRTCWeek(u16 year, u8 month, u8 day);                            //得到星期号

u8 SetAlarm(u8 hour, u8 min);

#endif
